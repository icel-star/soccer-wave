{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Login - Soccer Wave</title>
<meta name="description" content="Sign in to your Soccer Wave account to access exclusive soccer products and gear.">
{% endblock meta %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-white via-white to-pink-50 flex items-center justify-center p-4">
  <div class="max-w-md w-full">
    <!-- Floating Soccer Ball Animation -->
    <div class="absolute top-10 left-10 opacity-10 animate-bounce">
      <i class="fas fa-futbol text-6xl text-pink-400"></i>
    </div>
    <div class="absolute bottom-10 right-10 opacity-10 animate-bounce delay-1000">
      <i class="fas fa-futbol text-4xl text-pink-400"></i>
    </div>

    <!-- Main Card -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-2xl shadow-pink-100/50 overflow-hidden">
      <!-- Decorative Header -->
      <div class="bg-gradient-to-r from-pink-200 to-pink-400 p-6 text-center relative overflow-hidden">
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="relative z-10">
          <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-futbol text-white text-2xl"></i>
          </div>
          <h1 class="text-2xl font-bold text-white mb-2">Welcome Back</h1>
          <p class="text-pink-100">Sign in to continue your soccer journey</p>
        </div>
      </div>

      <!-- Form Container -->
      <div class="p-8">
        <!-- Form Errors Display -->
        {% if form.non_field_errors %}
          <div class="mb-6 animate-fade-in">
            {% for error in form.non_field_errors %}
              <div class="flex items-center px-4 py-3 rounded-xl bg-red-50 border border-red-200 text-red-700">
                <i class="fas fa-exclamation-circle mr-3"></i>
                <span class="text-sm">{{ error }}</span>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        {% if form.errors %}
          <div class="mb-6 animate-fade-in">
            {% for field, errors in form.errors.items %}
              {% if field != '__all__' %}
                {% for error in errors %}
                  <div class="flex items-center px-4 py-3 rounded-xl bg-red-50 border border-red-200 text-red-700 mb-2">
                    <i class="fas fa-exclamation-triangle mr-3"></i>
                    <span class="text-sm"><strong>{{ field|title }}:</strong> {{ error }}</span>
                  </div>
                {% endfor %}
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}

        <form method="POST" action="" class="space-y-6">
          {% csrf_token %}
          
          <!-- Username Field -->
          <div class="group">
            <label for="username" class="block text-sm font-semibold text-gray-700 mb-2">Username</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-user text-gray-400 group-focus-within:text-pink-400 transition-colors"></i>
              </div>
              <input 
                id="username" 
                name="username" 
                type="text" 
                required 
                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm" 
                placeholder="Enter your username"
                autocomplete="username">
            </div>
          </div>

          <!-- Password Field -->
          <div class="group">
            <label for="password" class="block text-sm font-semibold text-gray-700 mb-2">Password</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-lock text-gray-400 group-focus-within:text-pink-400 transition-colors"></i>
              </div>
              <input 
                id="password" 
                name="password" 
                type="password" 
                required 
                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent transition-all duration-200 bg-white/50 backdrop-blur-sm" 
                placeholder="Enter your password"
                autocomplete="current-password">
            </div>
          </div>

          <!-- Submit Button -->
          <button 
            type="submit" 
            class="w-full bg-gradient-to-r from-pink-200 to-pink-400 text-white font-semibold py-3 px-4 rounded-xl hover:from-pink-300 hover:to-pink-500 transition-all duration-200 transform hover:-translate-y-0.5 shadow-lg hover:shadow-xl shadow-pink-200/50">
            <i class="fas fa-sign-in-alt mr-2"></i>
            Sign In
          </button>
        </form>

        <!-- Messages Display -->
        {% if messages %}
          <div class="mt-6 space-y-2">
            {% for message in messages %}
              <div 
                class="
                  flex items-center px-4 py-3 rounded-xl text-sm border
                  {% if message.tags == 'success' %}
                    bg-pink-50 border-pink-200 text-pink-600
                  {% elif message.tags == 'error' %}
                    bg-red-50 border-red-200 text-red-700
                  {% else %}
                    bg-gray-50 border-gray-200 text-gray-700
                  {% endif %}
                ">
                <i class="fas 
                  {% if message.tags == 'success' %}
                    fa-check-circle
                  {% elif message.tags == 'error' %}
                    fa-exclamation-circle
                  {% else %}
                    fa-info-circle
                  {% endif %}
                  mr-3"></i>
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <!-- Divider -->
        <div class="mt-8 pt-6 border-t border-gray-200">
          <!-- Register Link -->
          <div class="text-center">
            <p class="text-gray-500 text-sm">
              Don't have an account? 
              <a href="{% url 'main:register' %}" class="text-pink-400 hover:text-pink-500 font-semibold transition-colors">
                Join Soccer Wave
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Info -->
    <div class="text-center mt-6">
      <p class="text-xs text-gray-400">
        By signing in, you agree to our 
        <a href="#" class="text-pink-400 hover:text-pink-500">Terms</a> 
        and 
        <a href="#" class="text-pink-400 hover:text-pink-500">Privacy Policy</a>
      </p>
    </div>
  </div>
</div>

<style>
@keyframes fade-in {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, #f472b6, #a855f7);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(to bottom, #ec4899, #9333ea);
}

/* Focus states for accessibility */
input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.1);
}

/* Smooth transitions for all interactive elements */
button, a, input {
  transition: all 0.2s ease-in-out;
}

/* Mobile optimizations */
@media (max-width: 640px) {
  .min-h-screen {
    padding: 1rem;
  }
  
  .p-8 {
    padding: 1.5rem;
  }
  
  .text-2xl {
    font-size: 1.5rem;
  }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add floating animation to decorative elements
  const floatingElements = document.querySelectorAll('.animate-bounce');
  floatingElements.forEach(el => {
    el.style.animation = 'bounce 3s infinite';
  });

  // Add input focus effects
  const inputs = document.querySelectorAll('input[type="text"], input[type="password"]');
  inputs.forEach(input => {
    input.addEventListener('focus', function() {
      this.parentElement.classList.add('ring-2', 'ring-pink-200');
    });
    
    input.addEventListener('blur', function() {
      this.parentElement.classList.remove('ring-2', 'ring-pink-200');
    });
  });

  // Form submission enhancement
  const form = document.querySelector('form');
  form.addEventListener('submit', function(e) {
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    
    // Show loading state
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Signing In...';
    submitBtn.disabled = true;
    
    // Re-enable after 5 seconds if still processing
    setTimeout(() => {
      submitBtn.innerHTML = originalText;
      submitBtn.disabled = false;
    }, 5000);
  });
});
</script>
{% endblock content %}